<div class="container mt-5 d-flex justify-content-center">
  <div class="card w-100" style="max-width: 700px;">
    <div class="card-header">
      <h5 class="mb-0 text-center">Modificar Alumno</h5>
    </div>

    <div class="card-body">
      <form [formGroup]="form" (ngSubmit)="save()">
        <div class="row g-3">
          <!-- Nro. Documento -->
          <div class="col-md-6">
            <label class="form-label">Nro. documento</label>
            <input
              type="text"
              class="form-control"
              formControlName="documentNumber"
              maxlength="30"
              autocomplete="off"
            />
            @if (form.get('documentNumber')?.invalid && form.get('documentNumber')?.touched) {
              <div class="text-danger small">
                @if (form.get('documentNumber')?.errors?.['maxlength']) {
                  <span>Máximo 30 caracteres.</span>
                }
                @if (form.get('documentNumber')?.errors?.['pattern']) {
                  <span>Solo números y letras.</span>
                }
              </div>
            }
          </div>

          <!-- Correo -->
          <div class="col-md-6">
            <label class="form-label">Correo</label>
            <input
              type="email"
              class="form-control"
              formControlName="email"
              maxlength="60"
            />
            @if (form.get('email')?.invalid && form.get('email')?.touched) {
              <div class="text-danger small">
                @if (form.get('email')?.errors?.['email']) {
                  <span>El correo no es válido.</span>
                }
                @if (form.get('email')?.errors?.['maxlength']) {
                  <span>Máximo 60 caracteres.</span>
                }
              </div>
            }
          </div>

          <!-- Apellidos -->
          <div class="col-md-6">
            <label class="form-label">Apellidos</label>
            <input
              type="text"
              class="form-control"
              formControlName="lastName"
              maxlength="60"
            />
            @if (form.get('lastName')?.invalid && form.get('lastName')?.touched) {
              <div class="text-danger small">
                <span>Máximo 60 caracteres.</span>
              </div>
            }
          </div>

          <!-- Nombres -->
          <div class="col-md-6">
            <label class="form-label">Nombres</label>
            <input
              type="text"
              class="form-control"
              formControlName="name"
              maxlength="60"
            />
            @if (form.get('name')?.invalid && form.get('name')?.touched) {
              <div class="text-danger small">
                <span>Máximo 60 caracteres.</span>
              </div>
            }
          </div>

          <!-- Teléfono -->
          <div class="col-md-6">
            <label class="form-label">Teléfono</label>
            <input
              type="tel"
              class="form-control"
              formControlName="phone"
              maxlength="30"
            />
            @if (form.get('phone')?.invalid && form.get('phone')?.touched) {
              <div class="text-danger small">
                @if (form.get('phone')?.errors?.['maxlength']) {
                  <span>Máximo 30 caracteres.</span>
                }
                @if (form.get('phone')?.errors?.['pattern']) {
                  <span>Solo números, + y espacios.</span>
                }
              </div>
            }
          </div>

          <!-- Foto -->
          <div class="col-md-6">
            <label class="form-label">Foto</label>
            <input
              type="text"
              class="form-control"
              formControlName="photo"
              maxlength="100"
            />
            @if (form.get('photo')?.invalid && form.get('photo')?.touched) {
              <div class="text-danger small">
                <span>Máximo 100 caracteres.</span>
              </div>
            }
          </div>

          <!-- Activo -->
          <div class="col-12">
            <div class="form-check form-switch">
              <input
                class="form-check-input"
                type="checkbox"
                role="switch"
                id="activeSwitch"
                formControlName="active"
              />
              <label class="form-check-label" for="activeSwitch">Activo</label>
            </div>
            <div class="form-text">
              (Se enviará como 1 si está activo, 0 si no)
            </div>
          </div>
        </div>

        <div class="mt-4 d-flex justify-content-end gap-2">
          <button type="button" class="btn btn-secondary" (click)="cancel()">Cancelar</button>
          <button type="submit" class="btn btn-primary" [disabled]="form.invalid">Guardar</button>
        </div>
      </form>

      @if(loading) {
        <div class="loading-overlay">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Guardando...</span>
          </div>
        </div>
      }
    </div>
  </div>
</div>
